<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
<div id="navbar">

        <img src="logo_rubicollect.png" id="logo">
        <a href="Decouvrir.html">Découvrir</a>
        <a href="Agir.html">Agir</a>
</div>

<h2>✏️ Laissez votre Avis</h2>
<form id="avisForm">

    <div class="form-group">
        <label for="prenom">Prénom :</label>
        <input type="text" id="prenom">
    </div>

    <div class="form-group">
        <label for="nom">Nom :</label>
        <input type="text" id="nom">
    </div>

    <div class="form-group">
        <label for="avis">Votre Avis :</label>
        <textarea id="avis"></textarea>
    </div>

    <button type="submit" id="submitBtn">Poster l'Avis</button>
</form>


<h2>⭐ Avis des Utilisateurs</h2>
<table id="avisTable">
    <thead>
    <tr>
        <th>Nom Complet</th>
        <th>Avis</th>
        <th>Date</th>
    </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<div class="BottomBar"><img src="BottomBar.png">
    <div class="soutenir">
        <p>N'hésitez pas à nous soutenir avec un petit don !</p>
    </div>
    <button class="ButtonDon" id="boutonDon" style="height:60px;width:100px">Faire un don</button>
    <img class="paypal" src="paypal.png" alt="paypal logo">
    <img class="cb" src="cb.png" alt="cb logo">
    <img class="robux" src="robux.png" alt="robux logo">

    <p id="message-statut" style="text-align: center; margin: 10px 0;"></p>

    <div class="FormulaireContact">
        <form id="contact-form-final"
              action="mailto:votreemail@example.com?subject=Demande%20de%20contact%20via%20le%20site"
              method="post"
              enctype="text/plain">
            <table>
                <tr>
                    <td><h3>Votre nom/âge</h3></td>
                </tr>
                <tr>
                    <td><input type="text" id="firstname" name="Prénom" maxlength="20" placeholder="Prénom" required></td>
                    <td><input type="text" id="lastname" name="Nom" maxlength="20" placeholder="Nom" required></td>
                    <td><input type="number" id="old" name="Âge" placeholder="Indiquez votre âge" required></td>
                </tr>
                <tr>
                    <td><h3>Moyen de contact</h3></td>
                </tr>
                <tr>
                    <td><input type="email" id="mail" name="Adresse_mail" placeholder="Adresse mail" required></td>
                    <td><input type="text" id="numero" name="Numéro_de_téléphone" placeholder="Numero de telephone" required></td>
                </tr>
            </table>
            <button class="ButtonContact" type="submit" style="height:60px;width:100px">CONFIRMER</button>
        </form>
    </div>
    <div class="avis">
        <p>Vous pouvez nous laisser un avis sur nos équipes et nos événements juste <a href="Avis.html">ici</a></p>
    </div>
</div>

<script>
    document.getElementById('avisForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const prenom = document.getElementById('prenom').value;
        const nom = document.getElementById('nom').value;
        const avisText = document.getElementById('avis').value;

        if (!avisText.trim()) {
            alert("Veuillez écrire votre avis !");
            return;
        }

        const tableBody = document.querySelector('#avisTable tbody');
        const newRow = tableBody.insertRow(0);

        const nomCell = newRow.insertCell(0);
        const avisCell = newRow.insertCell(1);
        const dateCell = newRow.insertCell(2);

        const prenomPropre = prenom.trim();
        const nomPropre = nom.trim();
        let nomComplet;

        if (prenomPropre === '' || nomPropre === '') {
            nomComplet = "Anonyme";
        } else {
            nomComplet = `${prenomPropre} ${nomPropre.toUpperCase().charAt(0)}.`;
        }

        const date = new Date().toLocaleDateString('fr-FR', {
            day: '2-digit', month: '2-digit', year: 'numeric'
        });

        nomCell.textContent = nomComplet;
        avisCell.textContent = avisText;
        dateCell.textContent = date;

        document.getElementById('avisForm').reset();
    });

    document.getElementById('boutonDon').addEventListener('click', function() {
        window.location.href = 'Don.html';
    });
</script>

</body>
</html>